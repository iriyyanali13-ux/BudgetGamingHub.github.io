<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Chat | Gaming Budget Hub</title>
    <style>
        html { scroll-behavior: smooth; }
        :root { --primary-neon: #00ffcc; --bg-deep: #0b0e14; --card-bg: #161b22; --highlight: #ffdb4d; }
        body.light-mode { --bg-deep: #f4f4f9; --card-bg: #ffffff; color: #333; }
        body { background-color: var(--bg-deep); color: #e6edf3; font-family: 'Segoe UI', sans-serif; margin: 0; transition: 0.3s; display: flex; flex-direction: column; min-height: 100vh; }
        
        /* Header & Nav Styles from existing site */
        .header { background: rgba(13, 17, 23, 0.95); border-bottom: 2px solid var(--primary-neon); display: flex; justify-content: space-between; align-items: center; padding: 1rem 5%; position: sticky; top: 0; z-index: 2000; }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary-neon); text-transform: uppercase; }
        .nav { display: flex; align-items: center; }
        .nav a { color: #fff; text-decoration: none; margin-left: 20px; font-weight: 500; transition: 0.3s; }
        .nav a:hover { color: var(--primary-neon); }
        .nav a.active { color: var(--primary-neon); border-bottom: 2px solid var(--primary-neon); padding-bottom: 5px; }
        body.light-mode .nav a { color: #333; }

        .mobile-menu { display: none; font-size: 1.5rem; cursor: pointer; color: var(--primary-neon); }

        @media (max-width: 768px) {
            .nav { display: none; position: absolute; top: 100%; left: 0; width: 100%; background: #0d1117; flex-direction: column; padding: 20px 0; }
            .nav.active { display: flex; }
            .mobile-menu { display: block; }
            .nav a { margin: 10px 0; text-align: center; }
        }

        .theme-btn { background: none; border: 1px solid var(--primary-neon); color: var(--primary-neon); cursor: pointer; padding: 5px 12px; border-radius: 5px; font-size: 1.2rem; }

        /* Chat Specific Styles */
        .container { max-width: 800px; margin: 40px auto; padding: 0 20px; flex: 1; display: flex; flex-direction: column; width: 100%; box-sizing: border-box; }
        .chat-card { background: var(--card-bg); border: 1px solid #30363d; border-radius: 12px; display: flex; flex-direction: column; height: 600px; overflow: hidden; transition: 0.3s; }
        
        #chat-history { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .message { max-width: 80%; padding: 12px 18px; border-radius: 18px; line-height: 1.5; font-size: 15px; word-wrap: break-word; }
        .user-message { align-self: flex-end; background-color: var(--primary-neon); color: #0b0e14; border-bottom-right-radius: 4px; font-weight: 500; }
        .ai-message { align-self: flex-start; background-color: #30363d; color: #e6edf3; border-bottom-left-radius: 4px; }
        body.light-mode .ai-message { background-color: #e4e6eb; color: #050505; }

        .typing-indicator { font-style: italic; color: var(--primary-neon); font-size: 0.9rem; padding: 10px 20px; display: none; }

        .input-area { padding: 20px; background: rgba(0,0,0,0.2); border-top: 1px solid #30363d; display: flex; gap: 10px; }
        input[type="text"] { flex: 1; padding: 12px; background: #0d1117; border: 1px solid #30363d; border-radius: 25px; color: #fff; outline: none; transition: 0.3s; }
        body.light-mode input[type="text"] { background: #f0f0f0; color: #333; }
        input[type="text"]:focus { border-color: var(--primary-neon); }

        .send-btn { background: var(--primary-neon); color: #0b0e14; border: none; padding: 10px 25px; border-radius: 25px; cursor: pointer; font-weight: 800; transition: 0.3s; }
        .send-btn:hover { background: #fff; transform: scale(1.05); }
        pre { background: #0d1117; color: var(--primary-neon); padding: 10px; border-radius: 8px; overflow-x: auto; font-family: monospace; }
    </style>
    
    <script type="importmap">
      { "imports": { "@google/generative-ai": "https://esm.run/@google/generative-ai" } }
    </script>
</head>
<body>

<header class="header">
    <div class="logo">Gaming Budget Hub</div>
    <div class="mobile-menu" id="mobile-menu">â˜°</div>
    <nav class="nav" id="nav-menu">
        <a href="index.html">Home</a>
        <a href="builds.html">PC Builds</a>
        <a href="fps-guides.html">FPS Guides</a>
        <a href="fps-counter.html">FPS Counter</a>
        <a href="contact.html">Contact Us</a>
        <a href="Ai-Chat.html" class="active">AI-Chat</a>
    </nav>
    <button id="theme-toggle" class="theme-btn">ðŸŒ™</button>
</header>

<main class="container">
    <h2 style="color: var(--primary-neon); text-align: center;">Gemini Gaming Assistant</h2>
    <p style="text-align: center; color: #8b949e; margin-bottom: 20px;">Ask about PC parts, prices in Pakistan, or FPS optimization.</p>
    
    <div class="chat-card">
        <div id="chat-history">
            <div class="message ai-message">Welcome to the Hub! I'm your AI assistant. Need help picking a GPU or fixing your FPS? Ask away!</div>
        </div>
        <div id="typing-indicator" class="typing-indicator">Gemini is analyzing...</div>
        <div class="input-area">
            <input type="text" id="user-input" placeholder="Ask about your budget build..." autocomplete="off">
            <button id="send-btn" class="send-btn">Send</button>
        </div>
    </div>
</main>

<footer style="background: #0d1117; border-top: 1px solid #30363d; padding: 40px 20px; text-align: center; margin-top: 50px;">
    <p style="color: var(--primary-neon); font-weight: 600;">GAMING BUDGET HUB</p>
    <p style="color: #484f58; font-size: 0.8rem; margin-top: 20px;">&copy; 2026 Gaming Budget Hub. All rights reserved.</p>
</footer>

<script src="main.js"></script> <script type="module">
    import { GoogleGenerativeAI } from "@google/generative-ai";

    // REPLACE WITH YOUR KEY
    const API_KEY = "AAIzaSyBS3ijU2RIIDQFnCfDaoV_EUxPIay3mdIM";

    const genAI = new GoogleGenerativeAI(API_KEY);
    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

    const chatHistoryElement = document.getElementById('chat-history');
    const userInput = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');
    const typingIndicator = document.getElementById('typing-indicator');

    let chatSession = model.startChat({
        history: [],
        generationConfig: { maxOutputTokens: 1000 },
    });

    function appendMessage(text, isUser) {
        const msgDiv = document.createElement('div');
        msgDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
        
        if (!isUser) {
            let formattedText = text
                .replace(/\*\*(.*?)\*\*/g, '<b>$1</b>')
                .replace(/```([\s\S]*?)```/g, '<pre>$1</pre>');
            msgDiv.innerHTML = formattedText;
        } else {
            msgDiv.textContent = text;
        }
        
        chatHistoryElement.appendChild(msgDiv);
        chatHistoryElement.scrollTop = chatHistoryElement.scrollHeight;
    }

    async function handleSend() {
        const text = userInput.value.trim();
        if (!text) return;
        if (API_KEY.includes("PASTE_YOUR")) {
            alert("Please edit the HTML file and enter your Google API Key.");
            return;
        }

        appendMessage(text, true);
        userInput.value = '';
        userInput.disabled = true;
        sendBtn.disabled = true;
        typingIndicator.style.display = 'block';

        try {
            const result = await chatSession.sendMessage(text);
            const response = await result.response;
            typingIndicator.style.display = 'none';
            appendMessage(response.text(), false);
        } catch (error) {
            typingIndicator.style.display = 'none';
            appendMessage("Error: Check your API key or connection.", false);
        } finally {
            userInput.disabled = false;
            sendBtn.disabled = false;
            userInput.focus();
        }
    }

    sendBtn.addEventListener('click', handleSend);
    userInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleSend(); });
</script>

</body>
</html>